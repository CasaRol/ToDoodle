<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="styles.css">
    <script>
        var completeList = {
            myList: ['SomeText', 'moreText', 'Avoid Numbers', 'more Testing']
        };

        console.log(completeList);
        //var array = ['SomeText', 'moreText', 'Avoid Numbers'];

        window.onload = () => {
            document.getElementById('list').appendChild(createList(completeList.myList));

            createList(completeList.myList);
            
        } 

        function createList(array) {
                
                var list = document.createElement('ul');
        
                for(var i = 0; i < array.length; i++) {
                    //Create list element
                    var item = document.createElement('li');
            
                    //set element content
                    item.appendChild(document.createTextNode(array[i]));
            
                    //add item to list
                    list.appendChild(item);
                }
        
            return list;
            } 

        function addToDo() {
            if(document.getElementById("todo").value !== "") {
                let entry = document.getElementById("todo").value;

                console.log("before = " + completeList.myList);

                completeList.myList.push(entry);
                createList(completeList.myList);

                console.log("after = " + completeList.myList);

                document.getElementById("todo").value = "";

                saveData();
                //pingServer();

            }
        }

        function saveData() {
            console.log("The complete list list lookes like this: " + JSON.stringify(completeList));
            fetch("http://localhost:8080/savedata", {
                method: 'post',
                body: JSON.stringify(this.completeList),
                headers: {
                    "content-type": "application/json; charset=UTF-8"
                }
            })
        }

        function pingServer() {
            console.log('server attempted pinged');
            fetch("http://localhost:8080/ping");
        }

    </script>

    <h1>ToDoodle</h1>
    <p class="centering">Online ToDo-lists for your pesonal use</p>

</head>

<body>

    <div style="align-items: center">
        <input type="text" id="todo" placeholder="Enter ToDo Here">
        <input onclick="addToDo()" type="submit" value="Add to ToDo" id="textArea">
    </div>
    
    <div id="list"></div>
        
</body>
    
</html>